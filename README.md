**Инструкция по настройке измерений в REW с микрофоном UMIK-1 и PipeWire (Linux)**

---

### 1. Подготовка

1. Скачайте REW (Room EQ Wizard) с официального сайта: https://www.roomeqwizard.com/
2. И лучше с встроенной Java так как со свежей Java он работать не будет.
3. Подключите измерительный микрофон UMIK-1 к USB.
4. Скачайте файл калибровки с сайта miniDSP: https://www.minidsp.com/products/acoustic-measurement/umik-1
   - Выберите файл `7163423_90deg.txt`, если будете измерять колонки под углом 90° (по горизонтали).
   REW не распознаёт параметр "Sens Factor", но поддерживает строку `Sensitivity: -18.3 dB`
   Поэтому добавляем эту строку **в начало** файла `7163423_90deg.txt` вручную через любой текстовый редактор.
   И убираем полностью строку Sens Factor, иначе REW может не распознать файл.
---

### 2. Настройка уровней

Установите громкость микрофона и вывода:
```bash
wpctl set-volume @DEFAULT_AUDIO_SOURCE@ 0.9
wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.5
```

---

### 3. Настройка REW

1. Откройте REW
2. Перейдите в меню **Preferences → Cal files**
3. В правом блоке **Mic cal files**:
   - Убедись, что активный вход (например, `Default Device Default Input`) выбран.
   - Нажмите на шестерёнку справа от строки и убедитесь, что флажок `Input device is a C weighted SPL meter` не установлен — для калиброванных микрофонов он должен быть выключен.
   - Укажите путь к файлу `7163423_90deg.txt`

---

### 4. Измерение

1. Перейдите на вкладку **Measure**
2. Нажмите **Check Levels** — уровень должен быть в пределах -12…-6 dBFS
3. Нажмите **Start Measuring**

---

### 5. Экспорт

- После замера откройте вкладку **EQ**
- Задайте тип устройства (обычно *Full range speaker*)
- Нажмите **Match Response to Target**
- Экспортируйте фильтры через **Export filter settings as text**
